# Terminal World Game (终端世界游戏)

CMD 回合制策略局域网/互联网对战游戏，类似钢铁雄心4的简化版本。

## 运行游戏

```bash
cd game
python main.py
```

## 游戏功能

- 回合制策略游戏
- 建造建筑、发展经济、训练军队、占领领土
- 支持局域网和互联网多人对战
- 火车站和铁路系统
- 国策树系统
- 核武器系统

## 网络对战须知

### 局域网对战

1. **房主**：选择"创建房间"，游戏会显示局域网 IP（如 `192.168.1.100:5555`）
2. **其他玩家**：选择"加入房间"，输入房主的局域网 IP

> 如果连接失败，房主需检查 Windows 防火墙是否阻止了连接（游戏会尝试自动开放端口）

### 互联网对战

互联网对战需要额外配置：

#### 房主操作步骤

1. 创建房间后，按 `I` 键开启"互联网连接模式"
2. 游戏会显示你的公网 IP（如 `103.151.172.81:5555`）
3. **重要**：需要在路由器中设置端口转发

#### 路由器端口转发设置

1. 登录路由器后台（通常是 `192.168.1.1` 或 `192.168.0.1`）
2. 找到"端口转发"、"虚拟服务器"或"NAT设置"
3. 添加规则：
   - 外部端口：`5555`
   - 内部 IP：你的局域网 IP（游戏中显示的局域网IP）
   - 内部端口：`5555`
   - 协议：TCP
4. 保存设置

#### 其他玩家操作

输入房主提供的公网 IP 即可连接（支持 `IP:端口` 格式）

### 常见连接问题

| 错误信息 | 可能原因 | 解决方法 |
|---------|---------|---------|
| 连接超时 | IP错误/服务器未运行/防火墙 | 检查IP、确认房主已创建房间、关闭防火墙 |
| 连接被拒绝 | 服务器未运行或端口错误 | 确认房主已创建房间，检查端口号 |
| 无法解析主机地址 | IP格式错误 | 检查输入的IP格式是否正确 |
| 服务器无响应 | 防火墙阻止/端口未转发 | 房主检查防火墙和路由器端口转发设置 |

### 端口说明

- 默认端口：`5555`
- 协议：TCP

## 游戏操作

| 按键 | 功能 |
|-----|------|
| W/A/S/D | 移动光标 |
| B | 建造建筑 |
| U | 升级建筑 |
| X | 拆除建筑 |
| P | 生产单位 |
| M | 移动单位 |
| T | 攻击 |
| L | 选择单位 |
| G | 派遣选中单位 |
| F | 设置进攻方向 |
| R | 设置防守方向 |
| J | 国策 |
| K | 核武器 |
| E | 结束回合 |
| C | 回到首都 |
| H | 帮助 |
| ESC | 取消选择 |
| Q | 退出 |

## 系统要求

- Python 3.6+
- Windows 系统（使用 msvcrt 进行实时按键检测）
